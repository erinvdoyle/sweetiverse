{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5">
  <h2 class="mb-4">üßÅ Manage Your Pick-N-Mix Subscription</h2>

  {% if subscription %}
    <div class="card p-4 mb-4">
      <h4>Hello, {{ user.username }}!</h4>
      <p><strong>Status:</strong> {{ subscription.active|yesno:"Active,Paused" }}</p>
      <p><strong>Next Billing Date:</strong> {{ subscription.next_billing_date }}</p>
      <p><strong>Delivery Frequency:</strong> {{ subscription.delivery_frequency|title }}</p>
      <p><strong>Sweeti Explorer:</strong> {{ subscription.explorer|yesno:"Included,Not Included" }}</p>
      <p><strong>Favorite Sweet Types:</strong> {{ subscription.sweet_types }}</p>
      <p><strong>Favorite Flavors:</strong> {{ subscription.flavor_preferences }}</p>

      <form method="POST" class="mt-3">
        {% csrf_token %}
        {% if subscription.active %}
          <button type="submit" name="action" value="pause" class="btn btn-warning">‚è∏ Pause Subscription</button>
        {% else %}
          <button type="submit" name="action" value="resume" class="btn btn-success">‚ñ∂ Resume Subscription</button>
        {% endif %}
      </form>
    </div>
  {% else %}
    <p>You don't currently have a Pick-N-Mix subscription.</p>
    <a href="{% url 'picknmix_signup' %}" class="btn btn-primary">Subscribe Now</a>
  {% endif %}
</div>
{% endblock %}
